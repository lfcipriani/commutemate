#!/usr/bin/env python

import sys, os
d = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))
sys.path.append(d)

from optparse import OptionParser
from commutemate.gpx_parser import GpxParser

# Parsing commend line arguments
parser = OptionParser("usage: %prog -i FOLDER -o FOLDER")
parser.add_option("-i", "--input", dest="folder", action="store",
                  help="input folder with GPX files")
parser.add_option("-o", "--output",
                  action="store", dest="output_folder", metavar="FOLDER", 
                  help="folder to save the output json files")
(options, args) = parser.parse_args()

# Validating arguments
if not options.folder or not options.output_folder:
    parser.error("input and output folders required")

# Getting all gpx files in specified folder
gpx_files = []
for f in os.listdir(options.folder):
    if f.endswith('.gpx'):
        gpx_files.append(os.path.abspath(
                os.path.join(
                    os.getcwd(), 
                    options.folder, 
                    f)))

# TODO do something with the files :-)
